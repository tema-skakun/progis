ProGIS Frontend Test Task
=========================

React приложение для отображения карт с подключением геосервисов (WMS/WFS/ZWS) с использованием Leaflet.

ФУНКЦИОНАЛЬНОСТЬ
----------------

- Отображение карты с поддержкой двух систем координат:
    * EPSG:3857 (Web Mercator)
    * EPSG:4326 (WGS84)
- Подключение геосервисов:
    * WMS (Web Map Service) - для растровых слоев
    * WFS (Web Feature Service) - для векторных данных
    * ZWS (Zulu Web Service) - для тайловых подложек
- Интерактивность:
    * Клик по объекту на карте для получения информации
    * Отображение свойств объекта во всплывающем окне
    * Подсветка найденных объектов
- Управление слоями:
    * Выбор ZWS слоя для базовой подложки
    * Включение/выключение WMS слоев
- Интернационализация (русский/английский)

ТЕХНОЛОГИИ
----------

- React 18 + TypeScript
- Leaflet + React-Leaflet - для картографии
- Vite - сборка и dev-сервер
- React i18next - интернационализация
- React Toastify - уведомления

ПРЕДВАРИТЕЛЬНЫЕ ТРЕБОВАНИЯ
--------------------------

- Node.js 16+
- npm или yarn

БЫСТРЫЙ СТАРТ
-------------

1. Клонирование репозитория
```bash
   git clone git@github.com:tema-skakun/progis.git
   cd progis
```

2. Установка зависимостей
```bash
   npm install
```

3. Запуск в режиме разработки
```bash
   npm run dev
```
   Приложение будет доступно по адресу: http://localhost:5173

4. Сборка для продакшена
```bash
   npm run build
```

5. Просмотр собранной версии
```bash
   npm run preview
```

КОНФИГУРАЦИЯ
------------
Прокси-настройки:
Приложение использует прокси для обхода CORS при запросах к OGC-сервисам.

Доступные слои:

ZWS слои (базовые подложки):

- example:demo - демонстрационный слой
- Автоматически загружаемый список доступных слоев

WMS слои (тематические):

- openlayers:teploset - Тепловая сеть
- mo:thermo - Thermo
- mo:vp - Водопроводная сеть

ИСПОЛЬЗОВАНИЕ
-------------

1. Переключение системы координат - выпадающий список в верхней панели
2. Выбор языка - русский/английский
3. Управление слоями - панель в правом верхнем углу карты:
    - Выбор ZWS слоя (доступно только для EPSG:3857)
    - Включение/выключение WMS слоев
4. Получение информации об объектах:
    - Кликните на любой объект на карте
    - Во всплывающем окне отобразятся свойства объекта
    - Векторные объекты будут подсвечены красным контуром

ОСОБЕННОСТИ РЕАЛИЗАЦИИ
----------------------
WMS GetFeatureInfo: При клике на карту отправляется запрос к WMS сервису для получения информации об объекте в точке
клика.

WFS Fallback: Если WMS не возвращает данные, выполняется WFS запрос для поиска объектов в bounding box вокруг точки
клика.

ZWS Tiles: Используется для отображения базовой картографической подложки в системе координат EPSG:3857.

Обработка данных:

- Поддержка различных форматов ответов (XML/GML, JSON)
- Парсинг GML-фич с извлечением геометрии и атрибутов
- Преобразование координат между системами

СТРУКТУРА ПРОЕКТА
-----------------
```txt
src/
├── components/                 # React компоненты
│   ├── MapView.tsx             # Основной компонент карты
│   ├── WmsLayersControl.tsx    # Управление WMS слоями
│   └── ZwsLayerSelect.tsx      # Выбор ZWS слоя
├── services/
│   └── ogc.ts                  # Сервисы для работы с OGC
├── utils/
│   └── xml.ts                  # Утилиты для парсинга XML
├── i18n.ts                     # Конфигурация интернационализации
└── main.tsx                    # Точка входа
```

АУТЕНТИФИКАЦИЯ
--------------
Для доступа к OGC-сервисам используются учетные данные:

- Логин: mo
- Пароль: mo

Учетные данные передаются через базовую HTTP аутентификацию в заголовках прокси.

ВОЗМОЖНЫЕ ПРОБЛЕМЫ И РЕШЕНИЯ
----------------------------
Проблема: Карта не загружается, ошибки CORS
Решение: Приложение использует прокси-сервер Vite для обхода CORS

Проблема: ZWS слои не работают в EPSG:4326
Решение: ZWS поддерживает только EPSG:3857, для EPSG:4326 используется WMS-слой mo:region

Проблема: Не отображаются всплывающие окна
Решение: Проверьте консоль браузера на наличие ошибок парсинга XML

КРИТЕРИИ ВЫПОЛНЕНИЯ
-------------------
-[x] Отображение карты со слоями (WMS/WFS/ZWS)

-[x] Интерактивность: клик по объекту → отображение атрибутов

-[x] Чистый и структурированный код

-[x] Использование React-подходов

-[x] Обработка ошибок

-[x] README с инструкцией по запуску

РАЗРАБОТКА
----------
Для дополнительной разработки:
- запуск линтера
```bash
npm run lint
```
- запуск TypeScript проверки
```bash
npm run type-check
```

ЛИЦЕНЗИЯ
--------
Тестовое задание для компании ProGIS
